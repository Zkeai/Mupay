edition: 3.0.0
name: Mupay
access: "mac"

resources:
  nextjsApp:
    component: fc3
    props:
      region: cn-hongkong
      service:
        name: nextjs-service
        internetAccess: true
      function:
        name: nextjs-function
        runtime: nodejs18
        handler: server.handler # 指向 server.js 中的 handler
        memorySize: 512
        timeout: 60
        codeUri: ./.next/standalone # 使用 standalone 输出目录
      environmentVariables:
        NODE_ENV: production
      preDeploy:
        - npm install # Install dependencies before deploying
        - npm run build # Build your Next.js app before deploying
